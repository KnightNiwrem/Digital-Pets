/**
 * Species definitions for Digital Pets.
 * Each species has growth stages with specific max stats per stage.
 *
 * Use SPECIES.FLORABIT.id to get the species ID "florabit".
 */

import {
  DamageType,
  GrowthStage,
  SpeciesArchetype,
  UnlockMethod,
} from "@/game/types/constants";
import type { Species, SpeciesGrowthStageStats } from "@/game/types/species";

/**
 * Helper to create a growth stage stats object.
 */
function createGrowthStage(
  stage: GrowthStage,
  subStage: string,
  name: string,
  minAgeTicks: number,
  care: { satiety: number; hydration: number; happiness: number },
  battle: {
    strength: number;
    endurance: number;
    agility: number;
    precision: number;
    fortitude: number;
    cunning: number;
  },
  energy: number,
  careLife: number,
  minSleepTicks: number,
): SpeciesGrowthStageStats {
  return {
    stage,
    subStage,
    name,
    minAgeTicks,
    baseStats: {
      care,
      battle,
      energy,
      careLife,
    },
    minSleepTicks,
  };
}

/**
 * Florabit growth stages - Balanced starter.
 * Consistent growth across all stats.
 */
const FLORABIT_GROWTH_STAGES: SpeciesGrowthStageStats[] = [
  // Baby stages (0-2 months)
  createGrowthStage(
    GrowthStage.Baby,
    "1",
    "Baby 1",
    0,
    { satiety: 50_000, hydration: 50_000, happiness: 50_000 },
    {
      strength: 10,
      endurance: 10,
      agility: 10,
      precision: 10,
      fortitude: 10,
      cunning: 10,
    },
    50_000,
    72_000,
    1920,
  ),
  createGrowthStage(
    GrowthStage.Baby,
    "2",
    "Baby 2",
    57_600,
    { satiety: 55_000, hydration: 55_000, happiness: 55_000 },
    {
      strength: 11,
      endurance: 11,
      agility: 11,
      precision: 11,
      fortitude: 11,
      cunning: 11,
    },
    52_000,
    76_000,
    1920,
  ),
  createGrowthStage(
    GrowthStage.Baby,
    "3",
    "Baby 3",
    115_200,
    { satiety: 60_000, hydration: 60_000, happiness: 60_000 },
    {
      strength: 12,
      endurance: 12,
      agility: 12,
      precision: 12,
      fortitude: 12,
      cunning: 12,
    },
    55_000,
    80_000,
    1920,
  ),
  // Child stages (2-5 months)
  createGrowthStage(
    GrowthStage.Child,
    "1",
    "Child 1",
    172_800,
    { satiety: 80_000, hydration: 80_000, happiness: 80_000 },
    {
      strength: 15,
      endurance: 15,
      agility: 15,
      precision: 15,
      fortitude: 15,
      cunning: 15,
    },
    75_000,
    120_000,
    1680,
  ),
  createGrowthStage(
    GrowthStage.Child,
    "2",
    "Child 2",
    259_200,
    { satiety: 90_000, hydration: 90_000, happiness: 90_000 },
    {
      strength: 17,
      endurance: 17,
      agility: 17,
      precision: 17,
      fortitude: 17,
      cunning: 17,
    },
    80_000,
    130_000,
    1680,
  ),
  createGrowthStage(
    GrowthStage.Child,
    "3",
    "Child 3",
    345_600,
    { satiety: 100_000, hydration: 100_000, happiness: 100_000 },
    {
      strength: 19,
      endurance: 19,
      agility: 19,
      precision: 19,
      fortitude: 19,
      cunning: 19,
    },
    85_000,
    140_000,
    1680,
  ),
  // Teen stages (5-8 months)
  createGrowthStage(
    GrowthStage.Teen,
    "1",
    "Teen 1",
    432_000,
    { satiety: 120_000, hydration: 120_000, happiness: 120_000 },
    {
      strength: 23,
      endurance: 23,
      agility: 23,
      precision: 23,
      fortitude: 23,
      cunning: 23,
    },
    100_000,
    168_000,
    1440,
  ),
  createGrowthStage(
    GrowthStage.Teen,
    "2",
    "Teen 2",
    518_400,
    { satiety: 130_000, hydration: 130_000, happiness: 130_000 },
    {
      strength: 26,
      endurance: 26,
      agility: 26,
      precision: 26,
      fortitude: 26,
      cunning: 26,
    },
    110_000,
    180_000,
    1440,
  ),
  createGrowthStage(
    GrowthStage.Teen,
    "3",
    "Teen 3",
    604_800,
    { satiety: 140_000, hydration: 140_000, happiness: 140_000 },
    {
      strength: 29,
      endurance: 29,
      agility: 29,
      precision: 29,
      fortitude: 29,
      cunning: 29,
    },
    120_000,
    192_000,
    1440,
  ),
  // Young Adult stages (8-12 months)
  createGrowthStage(
    GrowthStage.YoungAdult,
    "1",
    "Young Adult 1",
    691_200,
    { satiety: 160_000, hydration: 160_000, happiness: 160_000 },
    {
      strength: 34,
      endurance: 34,
      agility: 34,
      precision: 34,
      fortitude: 34,
      cunning: 34,
    },
    150_000,
    240_000,
    1200,
  ),
  createGrowthStage(
    GrowthStage.YoungAdult,
    "2",
    "Young Adult 2",
    806_400,
    { satiety: 170_000, hydration: 170_000, happiness: 170_000 },
    {
      strength: 38,
      endurance: 38,
      agility: 38,
      precision: 38,
      fortitude: 38,
      cunning: 38,
    },
    165_000,
    265_000,
    1200,
  ),
  createGrowthStage(
    GrowthStage.YoungAdult,
    "3",
    "Young Adult 3",
    921_600,
    { satiety: 180_000, hydration: 180_000, happiness: 180_000 },
    {
      strength: 42,
      endurance: 42,
      agility: 42,
      precision: 42,
      fortitude: 42,
      cunning: 42,
    },
    180_000,
    290_000,
    1200,
  ),
  // Adult stages (12+ months)
  createGrowthStage(
    GrowthStage.Adult,
    "1",
    "Adult 1",
    1_036_800,
    { satiety: 200_000, hydration: 200_000, happiness: 200_000 },
    {
      strength: 48,
      endurance: 48,
      agility: 48,
      precision: 48,
      fortitude: 48,
      cunning: 48,
    },
    200_000,
    336_000,
    960,
  ),
  createGrowthStage(
    GrowthStage.Adult,
    "2",
    "Adult 2",
    1_123_200,
    { satiety: 210_000, hydration: 210_000, happiness: 210_000 },
    {
      strength: 52,
      endurance: 52,
      agility: 52,
      precision: 52,
      fortitude: 52,
      cunning: 52,
    },
    210_000,
    350_000,
    960,
  ),
  createGrowthStage(
    GrowthStage.Adult,
    "3",
    "Adult 3",
    1_209_600,
    { satiety: 220_000, hydration: 220_000, happiness: 220_000 },
    {
      strength: 56,
      endurance: 56,
      agility: 56,
      precision: 56,
      fortitude: 56,
      cunning: 56,
    },
    220_000,
    365_000,
    960,
  ),
];

/**
 * Sparkfin growth stages - Agile glass cannon.
 * High agility/precision, low endurance/fortitude.
 */
const SPARKFIN_GROWTH_STAGES: SpeciesGrowthStageStats[] = [
  // Baby stages (2 substages - Fast Grower)
  createGrowthStage(
    GrowthStage.Baby,
    "1",
    "Baby 1",
    0,
    { satiety: 42_000, hydration: 48_000, happiness: 45_000 },
    {
      strength: 8,
      endurance: 6,
      agility: 14,
      precision: 14,
      fortitude: 8,
      cunning: 10,
    },
    42_000,
    61_000,
    1920,
  ),
  createGrowthStage(
    GrowthStage.Baby,
    "2",
    "Baby 2",
    86_400,
    { satiety: 50_000, hydration: 56_000, happiness: 53_000 },
    {
      strength: 10,
      endurance: 7,
      agility: 18,
      precision: 18,
      fortitude: 9,
      cunning: 12,
    },
    46_000,
    68_000,
    1920,
  ),
  // Child stages
  createGrowthStage(
    GrowthStage.Child,
    "1",
    "Child 1",
    172_800,
    { satiety: 68_000, hydration: 72_000, happiness: 70_000 },
    {
      strength: 12,
      endurance: 8,
      agility: 24,
      precision: 24,
      fortitude: 10,
      cunning: 15,
    },
    63_000,
    102_000,
    1680,
  ),
  createGrowthStage(
    GrowthStage.Child,
    "2",
    "Child 2",
    259_200,
    { satiety: 74_000, hydration: 78_000, happiness: 76_000 },
    {
      strength: 14,
      endurance: 9,
      agility: 28,
      precision: 28,
      fortitude: 11,
      cunning: 17,
    },
    67_000,
    110_000,
    1680,
  ),
  createGrowthStage(
    GrowthStage.Child,
    "3",
    "Child 3",
    345_600,
    { satiety: 80_000, hydration: 84_000, happiness: 82_000 },
    {
      strength: 16,
      endurance: 10,
      agility: 32,
      precision: 32,
      fortitude: 12,
      cunning: 19,
    },
    72_000,
    118_000,
    1680,
  ),
  // Teen stages
  createGrowthStage(
    GrowthStage.Teen,
    "1",
    "Teen 1",
    432_000,
    { satiety: 102_000, hydration: 108_000, happiness: 105_000 },
    {
      strength: 20,
      endurance: 12,
      agility: 40,
      precision: 40,
      fortitude: 14,
      cunning: 24,
    },
    85_000,
    142_000,
    1440,
  ),
  createGrowthStage(
    GrowthStage.Teen,
    "2",
    "Teen 2",
    518_400,
    { satiety: 108_000, hydration: 114_000, happiness: 111_000 },
    {
      strength: 22,
      endurance: 13,
      agility: 45,
      precision: 45,
      fortitude: 15,
      cunning: 27,
    },
    93_000,
    152_000,
    1440,
  ),
  createGrowthStage(
    GrowthStage.Teen,
    "3",
    "Teen 3",
    604_800,
    { satiety: 114_000, hydration: 120_000, happiness: 117_000 },
    {
      strength: 24,
      endurance: 14,
      agility: 50,
      precision: 50,
      fortitude: 16,
      cunning: 30,
    },
    102_000,
    162_000,
    1440,
  ),
  // Young Adult stages
  createGrowthStage(
    GrowthStage.YoungAdult,
    "1",
    "Young Adult 1",
    691_200,
    { satiety: 136_000, hydration: 144_000, happiness: 140_000 },
    {
      strength: 28,
      endurance: 16,
      agility: 60,
      precision: 60,
      fortitude: 18,
      cunning: 36,
    },
    127_000,
    204_000,
    1200,
  ),
  createGrowthStage(
    GrowthStage.YoungAdult,
    "2",
    "Young Adult 2",
    806_400,
    { satiety: 142_000, hydration: 150_000, happiness: 146_000 },
    {
      strength: 31,
      endurance: 17,
      agility: 67,
      precision: 67,
      fortitude: 19,
      cunning: 40,
    },
    140_000,
    224_000,
    1200,
  ),
  createGrowthStage(
    GrowthStage.YoungAdult,
    "3",
    "Young Adult 3",
    921_600,
    { satiety: 148_000, hydration: 156_000, happiness: 152_000 },
    {
      strength: 34,
      endurance: 18,
      agility: 74,
      precision: 74,
      fortitude: 20,
      cunning: 44,
    },
    153_000,
    246_000,
    1200,
  ),
  // Adult stages
  createGrowthStage(
    GrowthStage.Adult,
    "1",
    "Adult 1",
    1_036_800,
    { satiety: 170_000, hydration: 180_000, happiness: 175_000 },
    {
      strength: 40,
      endurance: 20,
      agility: 85,
      precision: 85,
      fortitude: 22,
      cunning: 52,
    },
    170_000,
    285_000,
    960,
  ),
  createGrowthStage(
    GrowthStage.Adult,
    "2",
    "Adult 2",
    1_123_200,
    { satiety: 176_000, hydration: 186_000, happiness: 181_000 },
    {
      strength: 44,
      endurance: 22,
      agility: 92,
      precision: 92,
      fortitude: 24,
      cunning: 57,
    },
    178_000,
    297_000,
    960,
  ),
  createGrowthStage(
    GrowthStage.Adult,
    "3",
    "Adult 3",
    1_209_600,
    { satiety: 182_000, hydration: 192_000, happiness: 187_000 },
    {
      strength: 48,
      endurance: 24,
      agility: 100,
      precision: 100,
      fortitude: 26,
      cunning: 62,
    },
    187_000,
    310_000,
    960,
  ),
];

/**
 * Rockpup growth stages - Tanky defender.
 * High endurance/fortitude, low agility/cunning.
 */
const ROCKPUP_GROWTH_STAGES: SpeciesGrowthStageStats[] = [
  // Baby stages
  createGrowthStage(
    GrowthStage.Baby,
    "1",
    "Baby 1",
    0,
    { satiety: 60_000, hydration: 55_000, happiness: 52_000 },
    {
      strength: 12,
      endurance: 14,
      agility: 6,
      precision: 8,
      fortitude: 14,
      cunning: 6,
    },
    60_000,
    86_000,
    1920,
  ),
  createGrowthStage(
    GrowthStage.Baby,
    "2",
    "Baby 2",
    57_600,
    { satiety: 66_000, hydration: 60_000, happiness: 56_000 },
    {
      strength: 13,
      endurance: 16,
      agility: 6,
      precision: 9,
      fortitude: 16,
      cunning: 6,
    },
    62_000,
    91_000,
    1920,
  ),
  createGrowthStage(
    GrowthStage.Baby,
    "3",
    "Baby 3",
    115_200,
    { satiety: 72_000, hydration: 66_000, happiness: 61_000 },
    {
      strength: 14,
      endurance: 18,
      agility: 7,
      precision: 10,
      fortitude: 18,
      cunning: 7,
    },
    66_000,
    96_000,
    1920,
  ),
  // Child stages
  createGrowthStage(
    GrowthStage.Child,
    "1",
    "Child 1",
    172_800,
    { satiety: 96_000, hydration: 88_000, happiness: 82_000 },
    {
      strength: 18,
      endurance: 24,
      agility: 8,
      precision: 12,
      fortitude: 24,
      cunning: 8,
    },
    90_000,
    144_000,
    1680,
  ),
  createGrowthStage(
    GrowthStage.Child,
    "2",
    "Child 2",
    259_200,
    { satiety: 104_000, hydration: 96_000, happiness: 88_000 },
    {
      strength: 20,
      endurance: 28,
      agility: 9,
      precision: 14,
      fortitude: 28,
      cunning: 9,
    },
    96_000,
    156_000,
    1680,
  ),
  createGrowthStage(
    GrowthStage.Child,
    "3",
    "Child 3",
    345_600,
    { satiety: 112_000, hydration: 104_000, happiness: 94_000 },
    {
      strength: 22,
      endurance: 32,
      agility: 10,
      precision: 16,
      fortitude: 32,
      cunning: 10,
    },
    102_000,
    168_000,
    1680,
  ),
  // Teen stages
  createGrowthStage(
    GrowthStage.Teen,
    "1",
    "Teen 1",
    432_000,
    { satiety: 144_000, hydration: 132_000, happiness: 120_000 },
    {
      strength: 28,
      endurance: 42,
      agility: 12,
      precision: 20,
      fortitude: 42,
      cunning: 12,
    },
    120_000,
    201_000,
    1440,
  ),
  createGrowthStage(
    GrowthStage.Teen,
    "2",
    "Teen 2",
    518_400,
    { satiety: 152_000, hydration: 140_000, happiness: 126_000 },
    {
      strength: 31,
      endurance: 48,
      agility: 13,
      precision: 22,
      fortitude: 48,
      cunning: 13,
    },
    132_000,
    216_000,
    1440,
  ),
  createGrowthStage(
    GrowthStage.Teen,
    "3",
    "Teen 3",
    604_800,
    { satiety: 160_000, hydration: 148_000, happiness: 132_000 },
    {
      strength: 34,
      endurance: 54,
      agility: 14,
      precision: 24,
      fortitude: 54,
      cunning: 14,
    },
    144_000,
    230_000,
    1440,
  ),
  createGrowthStage(
    GrowthStage.Teen,
    "4",
    "Teen 4",
    648_000,
    { satiety: 176_000, hydration: 162_000, happiness: 146_000 },
    {
      strength: 38,
      endurance: 61,
      agility: 15,
      precision: 27,
      fortitude: 61,
      cunning: 15,
    },
    162_000,
    259_000,
    1440,
  ),
  // Young Adult stages
  createGrowthStage(
    GrowthStage.YoungAdult,
    "1",
    "Young Adult 1",
    691_200,
    { satiety: 192_000, hydration: 176_000, happiness: 160_000 },
    {
      strength: 42,
      endurance: 68,
      agility: 16,
      precision: 30,
      fortitude: 68,
      cunning: 16,
    },
    180_000,
    288_000,
    1200,
  ),
  createGrowthStage(
    GrowthStage.YoungAdult,
    "2",
    "Young Adult 2",
    806_400,
    { satiety: 202_000, hydration: 186_000, happiness: 168_000 },
    {
      strength: 47,
      endurance: 76,
      agility: 17,
      precision: 33,
      fortitude: 76,
      cunning: 17,
    },
    198_000,
    318_000,
    1200,
  ),
  createGrowthStage(
    GrowthStage.YoungAdult,
    "3",
    "Young Adult 3",
    921_600,
    { satiety: 212_000, hydration: 196_000, happiness: 176_000 },
    {
      strength: 52,
      endurance: 84,
      agility: 18,
      precision: 36,
      fortitude: 84,
      cunning: 18,
    },
    216_000,
    348_000,
    1200,
  ),
  // Adult stages
  createGrowthStage(
    GrowthStage.Adult,
    "1",
    "Adult 1",
    1_036_800,
    { satiety: 240_000, hydration: 220_000, happiness: 200_000 },
    {
      strength: 62,
      endurance: 100,
      agility: 20,
      precision: 42,
      fortitude: 100,
      cunning: 20,
    },
    240_000,
    403_000,
    960,
  ),
  createGrowthStage(
    GrowthStage.Adult,
    "2",
    "Adult 2",
    1_123_200,
    { satiety: 250_000, hydration: 230_000, happiness: 208_000 },
    {
      strength: 68,
      endurance: 110,
      agility: 22,
      precision: 46,
      fortitude: 110,
      cunning: 22,
    },
    252_000,
    420_000,
    960,
  ),
  createGrowthStage(
    GrowthStage.Adult,
    "3",
    "Adult 3",
    1_209_600,
    { satiety: 260_000, hydration: 240_000, happiness: 216_000 },
    {
      strength: 74,
      endurance: 120,
      agility: 24,
      precision: 50,
      fortitude: 120,
      cunning: 24,
    },
    264_000,
    438_000,
    960,
  ),
];

/**
 * Coralite growth stages - Evasive status specialist.
 * High cunning/precision, moderate agility.
 */
const CORALITE_GROWTH_STAGES: SpeciesGrowthStageStats[] = [
  // Baby stages
  createGrowthStage(
    GrowthStage.Baby,
    "1",
    "Baby 1",
    0,
    { satiety: 45_000, hydration: 52_000, happiness: 48_000 },
    {
      strength: 8,
      endurance: 10,
      agility: 12,
      precision: 12,
      fortitude: 8,
      cunning: 14,
    },
    45_000,
    64_000,
    1920,
  ),
  createGrowthStage(
    GrowthStage.Baby,
    "2",
    "Baby 2",
    57_600,
    { satiety: 49_000, hydration: 56_000, happiness: 52_000 },
    {
      strength: 8,
      endurance: 11,
      agility: 14,
      precision: 14,
      fortitude: 8,
      cunning: 16,
    },
    46_000,
    68_000,
    1920,
  ),
  createGrowthStage(
    GrowthStage.Baby,
    "3",
    "Baby 3",
    115_200,
    { satiety: 53_000, hydration: 60_000, happiness: 56_000 },
    {
      strength: 9,
      endurance: 12,
      agility: 16,
      precision: 16,
      fortitude: 9,
      cunning: 18,
    },
    48_000,
    72_000,
    1920,
  ),
  // Child stages
  createGrowthStage(
    GrowthStage.Child,
    "1",
    "Child 1",
    172_800,
    { satiety: 72_000, hydration: 80_000, happiness: 76_000 },
    {
      strength: 10,
      endurance: 15,
      agility: 22,
      precision: 22,
      fortitude: 10,
      cunning: 25,
    },
    67_000,
    108_000,
    1680,
  ),
  createGrowthStage(
    GrowthStage.Child,
    "2",
    "Child 2",
    259_200,
    { satiety: 78_000, hydration: 86_000, happiness: 82_000 },
    {
      strength: 11,
      endurance: 17,
      agility: 26,
      precision: 26,
      fortitude: 11,
      cunning: 29,
    },
    72_000,
    117_000,
    1680,
  ),
  createGrowthStage(
    GrowthStage.Child,
    "3",
    "Child 3",
    345_600,
    { satiety: 84_000, hydration: 92_000, happiness: 88_000 },
    {
      strength: 12,
      endurance: 19,
      agility: 30,
      precision: 30,
      fortitude: 12,
      cunning: 33,
    },
    76_000,
    126_000,
    1680,
  ),
  // Teen stages
  createGrowthStage(
    GrowthStage.Teen,
    "1",
    "Teen 1",
    432_000,
    { satiety: 108_000, hydration: 120_000, happiness: 114_000 },
    {
      strength: 14,
      endurance: 24,
      agility: 38,
      precision: 38,
      fortitude: 14,
      cunning: 44,
    },
    90_000,
    151_000,
    1440,
  ),
  createGrowthStage(
    GrowthStage.Teen,
    "2",
    "Teen 2",
    518_400,
    { satiety: 114_000, hydration: 126_000, happiness: 120_000 },
    {
      strength: 15,
      endurance: 27,
      agility: 43,
      precision: 43,
      fortitude: 15,
      cunning: 50,
    },
    99_000,
    162_000,
    1440,
  ),
  createGrowthStage(
    GrowthStage.Teen,
    "3",
    "Teen 3",
    604_800,
    { satiety: 120_000, hydration: 132_000, happiness: 126_000 },
    {
      strength: 16,
      endurance: 30,
      agility: 48,
      precision: 48,
      fortitude: 16,
      cunning: 56,
    },
    108_000,
    172_000,
    1440,
  ),
  // Young Adult stages
  createGrowthStage(
    GrowthStage.YoungAdult,
    "1",
    "Young Adult 1",
    691_200,
    { satiety: 144_000, hydration: 160_000, happiness: 152_000 },
    {
      strength: 18,
      endurance: 38,
      agility: 58,
      precision: 58,
      fortitude: 18,
      cunning: 70,
    },
    135_000,
    216_000,
    1200,
  ),
  createGrowthStage(
    GrowthStage.YoungAdult,
    "2",
    "Young Adult 2",
    806_400,
    { satiety: 150_000, hydration: 166_000, happiness: 158_000 },
    {
      strength: 19,
      endurance: 42,
      agility: 64,
      precision: 64,
      fortitude: 19,
      cunning: 77,
    },
    148_000,
    238_000,
    1200,
  ),
  createGrowthStage(
    GrowthStage.YoungAdult,
    "3",
    "Young Adult 3",
    921_600,
    { satiety: 156_000, hydration: 172_000, happiness: 164_000 },
    {
      strength: 20,
      endurance: 46,
      agility: 70,
      precision: 70,
      fortitude: 20,
      cunning: 84,
    },
    162_000,
    261_000,
    1200,
  ),
  // Adult stages
  createGrowthStage(
    GrowthStage.Adult,
    "1",
    "Adult 1",
    1_036_800,
    { satiety: 180_000, hydration: 200_000, happiness: 190_000 },
    {
      strength: 24,
      endurance: 55,
      agility: 82,
      precision: 82,
      fortitude: 24,
      cunning: 100,
    },
    180_000,
    302_000,
    960,
  ),
  createGrowthStage(
    GrowthStage.Adult,
    "2",
    "Adult 2",
    1_123_200,
    { satiety: 186_000, hydration: 206_000, happiness: 196_000 },
    {
      strength: 26,
      endurance: 60,
      agility: 88,
      precision: 88,
      fortitude: 26,
      cunning: 108,
    },
    189_000,
    315_000,
    960,
  ),
  createGrowthStage(
    GrowthStage.Adult,
    "3",
    "Adult 3",
    1_209_600,
    { satiety: 192_000, hydration: 212_000, happiness: 202_000 },
    {
      strength: 28,
      endurance: 65,
      agility: 95,
      precision: 95,
      fortitude: 28,
      cunning: 116,
    },
    198_000,
    328_000,
    960,
  ),
];

/**
 * Emberfox growth stages - Fiery power tank.
 * Very high strength, high endurance.
 * Has 4 child substages (different from other species).
 */
const EMBERFOX_GROWTH_STAGES: SpeciesGrowthStageStats[] = [
  // Baby stages
  createGrowthStage(
    GrowthStage.Baby,
    "1",
    "Baby 1",
    0,
    { satiety: 62_000, hydration: 58_000, happiness: 55_000 },
    {
      strength: 16,
      endurance: 12,
      agility: 10,
      precision: 8,
      fortitude: 10,
      cunning: 8,
    },
    62_000,
    90_000,
    1920,
  ),
  createGrowthStage(
    GrowthStage.Baby,
    "2",
    "Baby 2",
    57_600,
    { satiety: 68_000, hydration: 64_000, happiness: 60_000 },
    {
      strength: 18,
      endurance: 14,
      agility: 11,
      precision: 8,
      fortitude: 11,
      cunning: 8,
    },
    65_000,
    95_000,
    1920,
  ),
  createGrowthStage(
    GrowthStage.Baby,
    "3",
    "Baby 3",
    115_200,
    { satiety: 74_000, hydration: 70_000, happiness: 66_000 },
    {
      strength: 20,
      endurance: 16,
      agility: 12,
      precision: 9,
      fortitude: 12,
      cunning: 9,
    },
    68_000,
    100_000,
    1920,
  ),
  // Child stages (4 substages - unique to Emberfox)
  createGrowthStage(
    GrowthStage.Child,
    "1",
    "Child 1",
    172_800,
    { satiety: 100_000, hydration: 92_000, happiness: 86_000 },
    {
      strength: 26,
      endurance: 22,
      agility: 14,
      precision: 11,
      fortitude: 16,
      cunning: 11,
    },
    93_000,
    150_000,
    1680,
  ),
  createGrowthStage(
    GrowthStage.Child,
    "2",
    "Child 2",
    237_600,
    { satiety: 108_000, hydration: 100_000, happiness: 92_000 },
    {
      strength: 30,
      endurance: 26,
      agility: 15,
      precision: 12,
      fortitude: 18,
      cunning: 12,
    },
    100_000,
    162_000,
    1680,
  ),
  createGrowthStage(
    GrowthStage.Child,
    "3",
    "Child 3",
    302_400,
    { satiety: 116_000, hydration: 108_000, happiness: 98_000 },
    {
      strength: 34,
      endurance: 30,
      agility: 16,
      precision: 13,
      fortitude: 20,
      cunning: 13,
    },
    107_000,
    175_000,
    1680,
  ),
  createGrowthStage(
    GrowthStage.Child,
    "4",
    "Child 4",
    367_200,
    { satiety: 124_000, hydration: 116_000, happiness: 104_000 },
    {
      strength: 38,
      endurance: 34,
      agility: 17,
      precision: 14,
      fortitude: 22,
      cunning: 14,
    },
    115_000,
    187_000,
    1680,
  ),
  // Teen stages
  createGrowthStage(
    GrowthStage.Teen,
    "1",
    "Teen 1",
    432_000,
    { satiety: 150_000, hydration: 138_000, happiness: 126_000 },
    {
      strength: 48,
      endurance: 42,
      agility: 20,
      precision: 16,
      fortitude: 28,
      cunning: 16,
    },
    125_000,
    210_000,
    1440,
  ),
  createGrowthStage(
    GrowthStage.Teen,
    "2",
    "Teen 2",
    518_400,
    { satiety: 160_000, hydration: 148_000, happiness: 134_000 },
    {
      strength: 54,
      endurance: 48,
      agility: 22,
      precision: 17,
      fortitude: 31,
      cunning: 17,
    },
    137_000,
    226_000,
    1440,
  ),
  createGrowthStage(
    GrowthStage.Teen,
    "3",
    "Teen 3",
    604_800,
    { satiety: 170_000, hydration: 158_000, happiness: 142_000 },
    {
      strength: 60,
      endurance: 54,
      agility: 24,
      precision: 18,
      fortitude: 34,
      cunning: 18,
    },
    150_000,
    242_000,
    1440,
  ),
  // Young Adult stages
  createGrowthStage(
    GrowthStage.YoungAdult,
    "1",
    "Young Adult 1",
    691_200,
    { satiety: 200_000, hydration: 184_000, happiness: 168_000 },
    {
      strength: 74,
      endurance: 66,
      agility: 28,
      precision: 22,
      fortitude: 42,
      cunning: 22,
    },
    187_000,
    300_000,
    1200,
  ),
  createGrowthStage(
    GrowthStage.YoungAdult,
    "2",
    "Young Adult 2",
    806_400,
    { satiety: 212_000, hydration: 196_000, happiness: 178_000 },
    {
      strength: 82,
      endurance: 74,
      agility: 30,
      precision: 24,
      fortitude: 47,
      cunning: 24,
    },
    206_000,
    331_000,
    1200,
  ),
  createGrowthStage(
    GrowthStage.YoungAdult,
    "3",
    "Young Adult 3",
    921_600,
    { satiety: 224_000, hydration: 208_000, happiness: 188_000 },
    {
      strength: 90,
      endurance: 82,
      agility: 32,
      precision: 26,
      fortitude: 52,
      cunning: 26,
    },
    225_000,
    362_000,
    1200,
  ),
  // Adult stages
  createGrowthStage(
    GrowthStage.Adult,
    "1",
    "Adult 1",
    1_036_800,
    { satiety: 250_000, hydration: 230_000, happiness: 210_000 },
    {
      strength: 105,
      endurance: 95,
      agility: 36,
      precision: 30,
      fortitude: 62,
      cunning: 30,
    },
    250_000,
    420_000,
    960,
  ),
  createGrowthStage(
    GrowthStage.Adult,
    "2",
    "Adult 2",
    1_123_200,
    { satiety: 262_000, hydration: 242_000, happiness: 220_000 },
    {
      strength: 115,
      endurance: 104,
      agility: 38,
      precision: 32,
      fortitude: 68,
      cunning: 32,
    },
    262_000,
    438_000,
    960,
  ),
  createGrowthStage(
    GrowthStage.Adult,
    "3",
    "Adult 3",
    1_209_600,
    { satiety: 274_000, hydration: 254_000, happiness: 230_000 },
    {
      strength: 125,
      endurance: 113,
      agility: 40,
      precision: 34,
      fortitude: 74,
      cunning: 34,
    },
    275_000,
    456_000,
    960,
  ),
];

/**
 * Shadowmoth growth stages - Evasion specialist.
 * Very high agility, high cunning, low strength/fortitude.
 */
const SHADOWMOTH_GROWTH_STAGES: SpeciesGrowthStageStats[] = [
  // Baby stages
  createGrowthStage(
    GrowthStage.Baby,
    "1",
    "Baby 1",
    0,
    { satiety: 40_000, hydration: 42_000, happiness: 48_000 },
    {
      strength: 6,
      endurance: 8,
      agility: 16,
      precision: 10,
      fortitude: 6,
      cunning: 14,
    },
    40_000,
    57_000,
    1920,
  ),
  createGrowthStage(
    GrowthStage.Baby,
    "2",
    "Baby 2",
    57_600,
    { satiety: 44_000, hydration: 46_000, happiness: 52_000 },
    {
      strength: 6,
      endurance: 8,
      agility: 19,
      precision: 11,
      fortitude: 6,
      cunning: 16,
    },
    42_000,
    60_000,
    1920,
  ),
  createGrowthStage(
    GrowthStage.Baby,
    "3",
    "Baby 3",
    115_200,
    { satiety: 48_000, hydration: 50_000, happiness: 56_000 },
    {
      strength: 7,
      endurance: 9,
      agility: 22,
      precision: 12,
      fortitude: 7,
      cunning: 18,
    },
    44_000,
    64_000,
    1920,
  ),
  // Child stages
  createGrowthStage(
    GrowthStage.Child,
    "1",
    "Child 1",
    172_800,
    { satiety: 64_000, hydration: 68_000, happiness: 76_000 },
    {
      strength: 8,
      endurance: 11,
      agility: 32,
      precision: 16,
      fortitude: 8,
      cunning: 26,
    },
    60_000,
    96_000,
    1680,
  ),
  createGrowthStage(
    GrowthStage.Child,
    "2",
    "Child 2",
    259_200,
    { satiety: 70_000, hydration: 74_000, happiness: 82_000 },
    {
      strength: 9,
      endurance: 12,
      agility: 38,
      precision: 18,
      fortitude: 9,
      cunning: 30,
    },
    64_000,
    104_000,
    1680,
  ),
  createGrowthStage(
    GrowthStage.Child,
    "3",
    "Child 3",
    345_600,
    { satiety: 76_000, hydration: 80_000, happiness: 88_000 },
    {
      strength: 10,
      endurance: 13,
      agility: 44,
      precision: 20,
      fortitude: 10,
      cunning: 34,
    },
    68_000,
    112_000,
    1680,
  ),
  // Teen stages
  createGrowthStage(
    GrowthStage.Teen,
    "1",
    "Teen 1",
    432_000,
    { satiety: 96_000, hydration: 102_000, happiness: 114_000 },
    {
      strength: 12,
      endurance: 16,
      agility: 58,
      precision: 26,
      fortitude: 12,
      cunning: 46,
    },
    80_000,
    134_000,
    1440,
  ),
  createGrowthStage(
    GrowthStage.Teen,
    "2",
    "Teen 2",
    518_400,
    { satiety: 102_000, hydration: 108_000, happiness: 120_000 },
    {
      strength: 13,
      endurance: 17,
      agility: 66,
      precision: 29,
      fortitude: 13,
      cunning: 52,
    },
    88_000,
    144_000,
    1440,
  ),
  createGrowthStage(
    GrowthStage.Teen,
    "3",
    "Teen 3",
    604_800,
    { satiety: 108_000, hydration: 114_000, happiness: 126_000 },
    {
      strength: 14,
      endurance: 18,
      agility: 74,
      precision: 32,
      fortitude: 14,
      cunning: 58,
    },
    96_000,
    153_000,
    1440,
  ),
  // Young Adult stages
  createGrowthStage(
    GrowthStage.YoungAdult,
    "1",
    "Young Adult 1",
    691_200,
    { satiety: 128_000, hydration: 136_000, happiness: 152_000 },
    {
      strength: 16,
      endurance: 22,
      agility: 90,
      precision: 40,
      fortitude: 16,
      cunning: 72,
    },
    120_000,
    192_000,
    1200,
  ),
  createGrowthStage(
    GrowthStage.YoungAdult,
    "2",
    "Young Adult 2",
    806_400,
    { satiety: 134_000, hydration: 142_000, happiness: 158_000 },
    {
      strength: 17,
      endurance: 24,
      agility: 100,
      precision: 44,
      fortitude: 17,
      cunning: 80,
    },
    132_000,
    211_000,
    1200,
  ),
  createGrowthStage(
    GrowthStage.YoungAdult,
    "3",
    "Young Adult 3",
    921_600,
    { satiety: 140_000, hydration: 148_000, happiness: 164_000 },
    {
      strength: 18,
      endurance: 26,
      agility: 110,
      precision: 48,
      fortitude: 18,
      cunning: 88,
    },
    144_000,
    230_000,
    1200,
  ),
  createGrowthStage(
    GrowthStage.YoungAdult,
    "4",
    "Young Adult 4",
    979_200,
    { satiety: 150_000, hydration: 159_000, happiness: 177_000 },
    {
      strength: 20,
      endurance: 29,
      agility: 120,
      precision: 53,
      fortitude: 20,
      cunning: 97,
    },
    152_000,
    249_000,
    1200,
  ),
  // Adult stages
  createGrowthStage(
    GrowthStage.Adult,
    "1",
    "Adult 1",
    1_036_800,
    { satiety: 160_000, hydration: 170_000, happiness: 190_000 },
    {
      strength: 22,
      endurance: 32,
      agility: 130,
      precision: 58,
      fortitude: 22,
      cunning: 105,
    },
    160_000,
    268_000,
    960,
  ),
  createGrowthStage(
    GrowthStage.Adult,
    "2",
    "Adult 2",
    1_123_200,
    { satiety: 166_000, hydration: 176_000, happiness: 196_000 },
    {
      strength: 24,
      endurance: 35,
      agility: 140,
      precision: 63,
      fortitude: 24,
      cunning: 114,
    },
    168_000,
    280_000,
    960,
  ),
  createGrowthStage(
    GrowthStage.Adult,
    "3",
    "Adult 3",
    1_209_600,
    { satiety: 172_000, hydration: 182_000, happiness: 202_000 },
    {
      strength: 26,
      endurance: 38,
      agility: 150,
      precision: 68,
      fortitude: 26,
      cunning: 123,
    },
    176_000,
    292_000,
    960,
  ),
  createGrowthStage(
    GrowthStage.Adult,
    "4",
    "Adult 4",
    1_296_000,
    { satiety: 178_000, hydration: 188_000, happiness: 208_000 },
    {
      strength: 28,
      endurance: 41,
      agility: 160,
      precision: 73,
      fortitude: 28,
      cunning: 132,
    },
    184_000,
    304_000,
    960,
  ),
];

/**
 * Starter species available at game start.
 */
export const SPECIES = {
  // Balanced starter - good all-around
  FLORABIT: {
    id: "florabit",
    name: "Florabit",
    description: "A gentle plant-like creature with balanced abilities.",
    archetype: SpeciesArchetype.Balanced,
    emoji: "üå±",
    resistances: {
      [DamageType.Slashing]: 5,
      [DamageType.Piercing]: 0,
      [DamageType.Crushing]: 5,
      [DamageType.Chemical]: 10,
      [DamageType.Thermal]: 0,
      [DamageType.Electric]: 0,
    },
    unlockMethod: UnlockMethod.Starting,
    growthStages: FLORABIT_GROWTH_STAGES,
  },

  // Agile glass cannon
  SPARKFIN: {
    id: "sparkfin",
    name: "Sparkfin",
    description: "A swift aquatic creature that strikes with precision.",
    archetype: SpeciesArchetype.GlassCannon,
    emoji: "‚ö°",
    resistances: {
      [DamageType.Slashing]: 0,
      [DamageType.Piercing]: 5,
      [DamageType.Crushing]: 0,
      [DamageType.Chemical]: 0,
      [DamageType.Thermal]: 5,
      [DamageType.Electric]: 15,
    },
    unlockMethod: UnlockMethod.Starting,
    growthStages: SPARKFIN_GROWTH_STAGES,
  },

  // Tanky defender
  ROCKPUP: {
    id: "rockpup",
    name: "Rockpup",
    description: "A sturdy rock-like creature with high endurance.",
    archetype: SpeciesArchetype.Defender,
    emoji: "ü™®",
    resistances: {
      [DamageType.Slashing]: 10,
      [DamageType.Piercing]: 15,
      [DamageType.Crushing]: 5,
      [DamageType.Chemical]: 0,
      [DamageType.Thermal]: 10,
      [DamageType.Electric]: 0,
    },
    unlockMethod: UnlockMethod.Starting,
    growthStages: ROCKPUP_GROWTH_STAGES,
  },

  // Evasive status specialist - quest unlock
  CORALITE: {
    id: "coralite",
    name: "Coralite",
    description:
      "A mysterious aquatic creature covered in beautiful coral. Elusive and tricky.",
    archetype: SpeciesArchetype.Status,
    emoji: "üêö",
    resistances: {
      [DamageType.Slashing]: 0,
      [DamageType.Piercing]: 5,
      [DamageType.Crushing]: 5,
      [DamageType.Chemical]: 10,
      [DamageType.Thermal]: 0,
      [DamageType.Electric]: 15,
    },
    unlockMethod: UnlockMethod.Quest,
    growthStages: CORALITE_GROWTH_STAGES,
  },

  // Fiery power tank - discovery unlock
  EMBERFOX: {
    id: "emberfox",
    name: "Emberfox",
    description:
      "A fierce fox-like creature wreathed in flames. Its power is unmatched but requires careful handling.",
    archetype: SpeciesArchetype.PowerTank,
    emoji: "üî•",
    resistances: {
      [DamageType.Slashing]: 0,
      [DamageType.Piercing]: 0,
      [DamageType.Crushing]: 0,
      [DamageType.Chemical]: 5,
      [DamageType.Thermal]: 25,
      [DamageType.Electric]: 5,
    },
    unlockMethod: UnlockMethod.Discovery,
    growthStages: EMBERFOX_GROWTH_STAGES,
  },

  // Evasion specialist - discovery unlock
  SHADOWMOTH: {
    id: "shadowmoth",
    name: "Shadowmoth",
    description:
      "A dark, ethereal moth-like creature that flits through shadows. Nearly impossible to catch.",
    archetype: SpeciesArchetype.Evasion,
    emoji: "ü¶ã",
    resistances: {
      [DamageType.Slashing]: 5,
      [DamageType.Piercing]: 0,
      [DamageType.Crushing]: 0,
      [DamageType.Chemical]: 15,
      [DamageType.Thermal]: 0,
      [DamageType.Electric]: 10,
    },
    unlockMethod: UnlockMethod.Discovery,
    growthStages: SHADOWMOTH_GROWTH_STAGES,
  },
} as const satisfies Record<string, Species>;

/** Array of all species for iteration. */
export const SPECIES_LIST: readonly Species[] = Object.values(SPECIES);

/** Map of species ID to species for lookup by ID string. */
const SPECIES_BY_ID: ReadonlyMap<string, Species> = new Map(
  SPECIES_LIST.map((s) => [s.id, s]),
);

/**
 * Get all species as an array.
 */
export function getAllSpecies(): readonly Species[] {
  return SPECIES_LIST;
}

/**
 * Get a species by ID.
 */
export function getSpeciesById(id: string): Species | undefined {
  return SPECIES_BY_ID.get(id);
}

/**
 * Get all starter species.
 */
export function getStarterSpecies(): Species[] {
  return SPECIES_LIST.filter((s) => s.unlockMethod === UnlockMethod.Starting);
}

/**
 * Get the growth stage definition for a species at a given age.
 * Accepts either a Species object or a species ID string.
 *
 * Note: A similar function getSpeciesStageStats exists in growthStages.ts
 * but only accepts species ID strings. This function is more flexible.
 */
export function getSpeciesGrowthStage(
  speciesOrId: Species | string,
  ageTicks: number,
): SpeciesGrowthStageStats | undefined {
  const species =
    typeof speciesOrId === "string" ? getSpeciesById(speciesOrId) : speciesOrId;
  if (!species) return undefined;

  // Find the highest growth stage that the pet qualifies for based on age
  let currentStage: SpeciesGrowthStageStats | undefined;
  for (const stage of species.growthStages) {
    if (ageTicks >= stage.minAgeTicks) {
      currentStage = stage;
    } else {
      break;
    }
  }
  return currentStage;
}

/**
 * Get the growth stage definition for a species by stage name and substage.
 */
export function getSpeciesGrowthStageByName(
  species: Species,
  stageName: GrowthStage,
  subStage: string,
): SpeciesGrowthStageStats | undefined {
  return species.growthStages.find(
    (gs) => gs.stage === stageName && gs.subStage === subStage,
  );
}

/**
 * Get the initial growth stage for a species.
 * Accepts either a Species object or a species ID string.
 */
export function getInitialGrowthStage(
  speciesOrId: Species | string,
): SpeciesGrowthStageStats | undefined {
  const species =
    typeof speciesOrId === "string" ? getSpeciesById(speciesOrId) : speciesOrId;
  if (!species) return undefined;
  return species.growthStages[0];
}
